function [y1,xf1] = myNeuralNetworkFunction(x1,xi1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 25-Apr-2017 14:14:35.
%
% [y1,xf1] = myNeuralNetworkFunction(x1,xi1) takes these arguments:
%   x1 = 15xTS matrix, input #1
%   xi1 = 15x23 matrix, initial 23 delay states for input #1.
% and returns:
%   y1 = 15xTS matrix, output #1
%   xf1 = 15x23 matrix, final 23 delay states for input #1.
% where TS is the number of timesteps.

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 5 6 7 8 9 10 11 12 13 14];
x1_step2.xoffset = [-12.1212528153389;-0.601920632543932;-1.15145934905925;-0.429547048440832;-1.12478221434753;-2.20204466365142;-0.786587714053331;-1.86890135285225;-0.560322744400975;-0.948088181180535;-2.0999150194759;-0.674067786760024;-0.761973256854406;-0.951831563844283];
x1_step2.gain = [0.0190059825244621;0.0193891389572893;0.0183627862416841;0.0193817633738518;0.0188405522355516;0.018745111532063;0.0186614404154796;0.0188884099959369;0.0195520316662885;0.0193727483430517;0.0189083145746926;0.0197256465182784;0.0225338675365694;0.0222063390888185];
x1_step2.ymin = -1;

% Layer 1
b1 = [0.010273176023889116562;0.010274754547582641215;-0.010271417904255506978;0.010274922307468965788];
IW1_1 = [-0.00798611697368307831 -0.010233466888633668476 -0.010133648317020318291 -0.0063691314860024406466 0.010272949050969532384 0.010061104007775462099 0.0094190255023958273373 0.0097523519354375167584 0.008020001001776121477 0.0097153913018246541161 0.0094956223529023553453 0.0060345935719081792228 -0.0084464986813486339634 -0.010152168492962772642 -0.0079594024107214386005 -0.01021750768148185079 -0.010109352654046681666 -0.010251434978950424437 0.00079611350414120164373 0.010272942772013559168 0.009553805780844137896 0.0098309016683472590092 0.0083604817360284338496 0.0096993642365519276011 0.0094065749436950691492 0.0073245144539957314847 0.010152184406477521642 -0.010272941360947075023 -0.0079758781343000819536 -0.010207844403182026599 -0.0101105526537215544 -0.010244767786379959523 -0.010039888725581216922 0.0065957580532573388196 0.0097679878582514183954 0.0099596845772788392126 0.010184776572530196415 0.0097548645578011371204 0.0094016490046064226521 0.0072708566210608234492 0.0098342986945500615592 0.0016763871130648316885 -0.0083424767607227848232 -0.01023452423105758631 -0.010134781706869860213 -0.010270007171397973339 -0.01013628783568126801 -0.0034237393683519078656 0.010272953037012933983 0.0101279929304310852 0.010272975219785950018 0.0097602568972597423397 0.0094160374738427882885 0.0074022129050502474476 0.0098770883393946833778 0.01027180567714638601 0.0094913384234798659628 -0.01027296223232749238 -0.010108486243591657122 -0.010247353047274376098 -0.01011082954778217205 -0.0099068830147529766267 0.0024300376116501570811 0.010272941753591538841 0.01013880254628599098 0.0098885892740469775314 0.0094536527047731997581 0.007465240528366192535 0.0096680914042875359254 0.010272951143011783623 0.010272945765922169778 -0.0042064926527550210861 -0.010113095683849958328 -0.010247653912083388647 -0.010111545876139681199 -0.0099059293459967893286 -0.0092027104075540905326 0.008743362029735331567 0.0097119022448931766056 0.010009885213833731588 0.0095196254367331933216 0.0078761667963446642393 0.0095498250411801752224 0.010061042514040606163 0.01016336525237791083 0.0083221508878928898006 -0.010272942975236730098 -0.010265552739668191984 -0.010139076568885688895 -0.0099353878229532597427 -0.010204089790325500745 -0.0012407882218289888188 0.0092774749428169798332 0.010272967935003759349 0.0096252741407056967293 0.0080541645912276579183 0.0095697352296544822836 0.010033906063075947665 0.010089366184309415606 0.0094948320535162399753 -0.0017779688182267753931 -0.010272971919316833261 -0.010111070477111188878 -0.0099056878776132492592 -0.010178181266470451294 -0.0099633536874407825634 0.0037053336091734017169 0.0098051193848716858975 0.0097740404321386802067 0.008748789585781876002 0.0093779452673161175363 0.0099751071521097384176 0.010094367725502890326 0.010272962461018705915 0.00015717158387871225543 -0.0083512391342416558704 -0.010113101260734997169 -0.0099051494482544615722 -0.010178607462877808237 -0.0099710396244502771945 -0.0066768264332884470769 0.0088230173068697265171 0.010010826205931544833 0.0097440856618442889953 0.010272959311523648801 0.010039769362905012068 0.010094007587488511291 0.0085123806394792316671 0.0021214880652745057854 0.010249263596765801482 -0.010272978008985899148 -0.009927536443945905037 -0.010201772554059334447 -0.0099929300003353156712 -0.010245750055218683441 -0.00027342027076792248209 0.010272954180546607986 0.0099049017718779528568 -0.0010139279701557770818 0.0092597358183565889322 0.010004796751680302899 0.0080718966247713061501 0.0026076440183654438221 0.010107407762969538786 0.0003527475582409331234 -0.0099112967580600435519 -0.010175816278291090547 -0.0099677802854524228532 -0.010219004499910587166 -0.010083986239445275751 0.0067546804172094673802 0.0095661219845534373879 -0.0032015461943152587546 0.0052376710979420756237 0.01009391475341727025 0.0080104032837119438365 0.0034782123889649241288 0.0099828801379611004085 0.0094817957298637140645 -0.010272947586480648055 -0.010175294084540736916 -0.0099675672823773854569 -0.010222042822649591437 -0.010143623772695932461 -0.0034514225500694847501 0.0097668014708520659722 -0.0042170125089926093626 0.0079339606610405507409 0.0097777336506987486131 0.0099049396663608690189 0.0052223792859110058917 0.0099521729605947222702 0.0080435532043239676286 0.0092376655711720895986 -0.010272947621957843889 -0.0099876805653159005105 -0.010245818815491802845 -0.010166781324034276576 -0.0099483944545787073022 0.0021936195253264099275 -0.0058978875571282212559 0.0058697332592249368971 0.0069331666083678198179 0.0082627155867680875806 0.0072871832567141647113 0.0098672990377056350036 0.0075918868025868137955 0.0097660984160955841699 -0.0035327621932162633564 -0.0099662246200196199369 -0.010219608609171131758 -0.010141495215067058283 -0.0099208082158115506316 -0.0093086585078429578272 -0.0074319994729159675681 0.0056859035275431965908 0.0075087739227779198847 0.010120826913964974317 0.0087039771314181765827 0.0098561256354949122044 0.0095134352052032473968 0.0096702138472364741056 0.0094083213389362149032 -0.010272942564106173416 -0.010215784851159792276 -0.010143513348072688562 -0.0099242646790313384514 -0.010194522678078387842 -0.0096279917034894531291 0.0095254202816197341974 0.00595686076661556662 0.0099411819576316912822 0.0092711366734722546606 0.0099497637626850942566 0.0076978505898795887563 0.0096414433321484090122 0.0093218980333956858592 0.0064490868346771075201 -0.010272947211982222729 -0.010163650470880728274 -0.0099412316467110458523 -0.01022218726682207722 -0.010195715237747225712 0.0040622397831602923002 0.0052233146060322380166 0.0092464902686123905812 0.0093563734045181076726 0.0099375113435395956429 0.0076721972010764848474 0.0095601658251770870595 0.0092618680584608693157 0.009808867217844111433 -0.0084653329301419624753 -0.01013934040238295177 -0.0099237825147478232746 -0.010199202368329843282 -0.010162856725953076792 -0.0060098763397165126665 -0.00047532260958199000185 0.0087764646599148687239 0.0095610052745190715617 0.01012276656709197066 0.0077326901651337898516 0.0096108687584450756825 0.0092225366313055927997 0.0078071840922036674429 0.0089134504065297957831 -0.010272943999577871521 -0.0099175925413752773208 -0.01019776295880859239 -0.010164031043149937203 -0.010121031058975044417 -0.0074688821182711069221 0.0055225449694971369755 0.0097348515743476398548 0.010272946010139392611 0.0078304450901881469949 0.0096783214644659103232 0.00918243361719494125 0.0077130563244485195185 0.0093877770358495229303 0.00062174962393428704829 -0.0099561159560073927977 -0.010215820504597739049 -0.010187292935277663178 -0.010146153985868289552 -0.0079200532874354554608 -0.0040670200623920084101 0.010272946746551469763 0.0090988201298369698194 0.0079310840274207546063 0.0097519404504646800547 0.0092602781320678777266 0.0076661900726653969471 0.0080717267711181740764 0.0080777006884065020997 -0.010272946434822623901 -0.010192927964548795933 -0.010168511303976335292 -0.010128375284260110467 -0.010272972366246753417 -0.010212469192456169118 0.0023993056150191345924 0.0073982180069300700412 0.0080575213556103048723 0.0098451113252376529217 0.0093319795675450324668 0.0076648437954877877976 0.0091807845889663002026 0.0079756992461010069173 0.0091529403233762702402 -0.010272966046614654539 -0.010164639153805494001 -0.010125975506618166422 -0.0079658940457294300647 -0.010231091603694729072 -0.0092288355055263823767 0.0048234430054621309225 0.0081654749677382079676 0.0099586108915279986792 0.0093983111089633673135 0.0076915862714551806387 0.008657351868440797335 0.0078857860596282039478 0.0093102188206011567834 -0.0030706946258565676403 -0.010183040624151490014 -0.010138289524412494313 -0.0079063247984497257714 -0.01021886901278499897 -0.01011812026826974277 -0.0033021917574133502482 0.0096152451244162218114 0.010160334585999689777 0.0094275447213316050654 0.0085071984731092294141 0.0095346693596887622385 0.007830022037649172692 0.0076649750128269791491 0.010272974214365104481 -0.010272960543654976323 -0.010124309701875566087;-0.0079874536383226814318 -0.010235185618877455302 -0.010135343844392463719 -0.0063701942028318182115 0.010274664898574656716 0.010062770880613714289 0.0094205910773698803284 0.0097540104907432659265 0.0080213250869690735922 0.0097170194621840431243 0.0094971934746683212697 0.0060355926056168207952 -0.0084478881651440466266 -0.010153880159493804125 -0.0079607121852404254259 -0.010219216659907787853 -0.010111028531419792922 -0.010253135477644456999 0.00079625676857824657928 0.010274665110106452268 0.0095553694800234924983 0.0098325552451085703604 0.0083618590015659133297 0.0097010002249429076043 0.0094081601632898994442 0.0073257529860870206767 0.010153907957399980685 -0.010274675998763230581 -0.007977206687168463331 -0.010209554886645948527 -0.010112244340160786091 -0.010246466547450030701 -0.01004157917417591514 0.006596839285685565657 0.0097696228774583008386 0.0099613467183497748925 0.010186492035115908561 0.0097564828437211783413 0.0094032425693978093084 0.0072720787555213550757 0.0098359493891555186545 0.0016766802536146169916 -0.0083438752325628393752 -0.010236221227433986783 -0.010136493405692451747 -0.010271695100117233038 -0.01013799694919092359 -0.0034242888558043932216 0.010274680855281784209 0.010129672187033172959 0.010274657344166569783 0.0097618930240664543441 0.0094176167646823020357 0.0074034479645703893391 0.0098787423045297566987 0.010273525689664556731 0.0094929380370218554436 -0.01027468511391754942 -0.010110181874856131318 -0.010249052753517777503 -0.010112519426728954625 -0.0099085572559433933437 0.0024304700828801715888 0.010274683215243050546 0.010140512378088897827 0.0098902393294454764294 0.0094552171182570934893 0.0074664984891506681192 0.0096697114246456356002 0.010274661986527815205 0.010274673559047002927 -0.0042071737892740330989 -0.01011478187544761001 -0.010249383751676858709 -0.010113249721347835133 -0.0099075530792516897788 -0.0092042494631259207105 0.0087448126370581781563 0.0097135347217505579875 0.010011567798980337482 0.0095212101102844833717 0.007877479850653026916 0.0095513943967094165621 0.010062747694960266776 0.010165084958445777183 0.0083235306009438909947 -0.010274694365702580212 -0.010267291639840480516 -0.010140775356920652198 -0.0099370317722367648011 -0.010205782217902015924 -0.0012409956074961587917 0.009279039034883588416 0.010274691603084964639 0.0096268493741884300641 0.008055505952810277856 0.0095713585279275561341 0.010035568051456413702 0.010091035860939743043 0.0094963872528308224813 -0.0017782300979708551714 -0.010274676563929965173 -0.010112757574208836725 -0.0099073619170218230057 -0.01017988753375637101 -0.0099650396070946785365 0.0037059616693836286254 0.0098067447573018124568 0.009775649192426100198 0.008750243857899535696 0.0093795185457404093438 0.0099767936897845119204 0.010096087377829814427 0.010274670507491681995 0.00015721203787797335288 -0.0083526239399609979175 -0.010114776754245892107 -0.0099068178844630688101 -0.010180292856196220333 -0.0099727334258272529177 -0.0066779539530857382965 0.0088245094163445000207 0.010012495363917142677 0.0097457377712852188284 0.010274664895159539568 0.010041431332002520929 0.010095662570302444197 0.0085138228321744793825 0.0021218419804355848936 0.010250975910391557991 -0.010274672166895764888 -0.0099292072313132834216 -0.01020345205278535769 -0.0099946328924438703617 -0.010247464983442717418 -0.00027345381657992672269 0.010274673235985257169 0.0099065627904447103869 -0.0010141145275415466755 0.0092612559966603145295 0.010006461741034930815 0.0080732565947048903765 0.002608064001281732748 0.010109117718618512716 0.00035280635047122218964 -0.0099129538652983732738 -0.0101775417420809592 -0.009969444518606533634 -0.010220719291646453153 -0.010085681957375929388 0.0067558035883533967131 0.0095677310301885715865 -0.0032020538271015667672 0.0052385455369060064668 0.010095592041406073469 0.0080117677038247722687 0.0034788128703193352265 0.009984526072996229365 0.0094833878067315125621 -0.010274695757648347194 -0.010177005654867472134 -0.0099692351501764024657 -0.010223726672766683329 -0.010145286197665854058 -0.0034520228555902435219 0.0097684324436936413594 -0.0042177057915326167728 0.0079353105698961711595 0.0097793611983850413372 0.0099065754011919242294 0.0052232626923303408437 0.0099538242585870944507 0.0080448929601705226194 0.0092392178970929147996 -0.010274662445398322769 -0.0099893463960183444955 -0.01024752947327540499 -0.010168500639849626863 -0.0099500875955926375294 0.0021940179211562462619 -0.0058988968975698472669 0.0058707316519057166013 0.0069343200373223222097 0.0082640962951971395911 0.0072884046023968824396 0.0098689594964855003462 0.0075931490610372555372 0.0097677030938735573407 -0.0035333416108881232458 -0.0099679076992514447503 -0.010221300353571478522 -0.010143197090238770947 -0.0099224383708703799839 -0.0093102361659016270173 -0.0074332438458952453109 0.0056868543126057510481 0.0075100222315757653863 0.0101225140413972476 0.0087054411109980401468 0.0098577748795379456503 0.0095150188160885770111 0.0096718318408740202446 0.0094098633243590128206 -0.010274664697301275074 -0.010217466664890826125 -0.010145218745502707428 -0.0099259589436839802679 -0.010196223644560336447 -0.009629633935721552615 0.0095269800252326709844 0.0059578643035343202897 0.0099428491742894892225 0.0092727012272029469414 0.0099514500212590263628 0.0076991609405232599994 0.0096430571987391276029 0.0093234346230983960319 0.0064501451307379725417 -0.010274663183527887184 -0.010165337308533748881 -0.0099428909945791753289 -0.010223892804745183735 -0.010197438420089527042 0.0040629364920336296166 0.0052241955935308573289 0.0092480201037078782478 0.0093579493801434921602 0.0099391627429752521516 0.0076735010369048794326 0.0095617649488136564895 0.0092634459330507325225 0.0098105186666330550238 -0.0084667525621795643176 -0.010141009329627465388 -0.0099254430763980570906 -0.010200905787676814093 -0.010164550993107717217 -0.006010868054860488488 -0.00047536476351614319726 0.0087779363416315148161 0.0095625987391504147644 0.010124451400660249359 0.0077339931046810899556 0.0096124985324539634346 0.0092240570215640117768 0.0078084953198859739787 0.0089149197073593259427 -0.010274676706657956057 -0.0099192671244468563069 -0.010199463216543910166 -0.010165713548403832595 -0.01012272191757065086 -0.0074701346053238915079 0.0055234810185467060617 0.0097365032390237787191 0.010274676619353436541 0.0078317541777580164386 0.0096799200699657222957 0.0091839791889987767992 0.0077143626643799154477 0.0093893578199790266037 0.00062188093515087297311 -0.0099577941389935656358 -0.010217521390097916018 -0.010189009097816902755 -0.010147873178576152092 -0.007921350935754339212 -0.0040676757500842904494 0.010274669327430097088 0.0091003410526031471711 0.0079324358437007358447 0.0097535951939655470694 0.0092618180922218358575 0.0076674516317662656448 0.0080731032727905903401 0.00807906284903128942 -0.010274673144012874335 -0.010194615813771892507 -0.010170173889907253156 -0.010130094721848618283 -0.010274696500214893641 -0.010214187704894487838 0.0023996986837348365657 0.0073994604761740620513 0.0080588682899077803551 0.0098467641884361026966 0.0093335282606291196383 0.0076661386045181823326 0.0091823137750821712949 0.007977036857773267195 0.0091544767160117203331 -0.01027466194840742815 -0.010166324381643752212 -0.0101276770520780518 -0.0079672178576315165477 -0.010232819001653516502 -0.0092303629009456954202 0.0048242389196039561425 0.0081668140284344523799 0.0099602789314673229049 0.0093998662040913963378 0.0076928943280773227215 0.0086587935232839939592 0.0078871088504640796818 0.0093117401695326819377 -0.0030712186366923721267 -0.010184773352364373186 -0.01013997654154050708 -0.007907620364695121945 -0.010220606738297138838 -0.010119809304772945172 -0.0033027673174411357332 0.0096168551127386696364 0.010162023496462229896 0.0094291072686989892138 0.0085086336327043887023 0.00953629478153807629 0.0078313337890077560494 0.007666281535211270752 0.010274679110720115471 -0.010274694567105899581 -0.010126001924794885561;0.0079849633788802876905 0.010232004328504571908 0.010132149864028988998 0.0063681855317742341871 -0.010271476320187496178 -0.010059616012071916774 -0.0094176698393036474555 -0.0097509743593990633875 -0.0080188283743734770775 -0.0097139879938021346517 -0.0094942382886388110991 -0.0060337240395651305438 0.0084452812663223433137 0.010150714736340538807 0.0079582482754627613397 0.010216039006687197346 0.010107897063800597853 0.010249970941897810356 -0.00079600998344055606988 -0.010271464249554643558 -0.0095524053927103468042 -0.009829506294275001943 -0.0083592906573285528232 -0.009697972607058943928 -0.0094052307638287369063 -0.0073234867405607834145 -0.010150723558732146004 0.010271468388719633483 0.0079747381458680332428 0.010206366253620001439 0.010109111695301924161 0.010243290567528278226 0.010038435661086553621 -0.0065948064165182547144 -0.0097665744604920334826 -0.0099582663329135633762 -0.010183333344264394044 -0.00975346219093588436 -0.009400320862609409453 -0.0072698461758498962235 -0.0098329073408554585473 -0.0016761244627448118431 0.0083412741680014591827 0.010233019460232349943 0.010133354080841316947 0.010268515053617503427 0.010134837458387129308 0.0034232525650977371594 -0.010271461508967178258 -0.01012651079142181873 -0.010271476322541057968 -0.0097588751380622441173 -0.0094147007993254268332 -0.0074011631043471581837 -0.0098756379109014389567 -0.010270349645837846542 -0.0094899697033425847031 0.010271477662213927134 0.010107044290071290696 0.010245854749654956586 0.010109366436621363902 0.0099054399162041995713 -0.0024296805821617728158 -0.010271464092717523878 -0.010137355590697550572 -0.0098871465027194072039 -0.0094523052250549792486 -0.0074641531282358779265 -0.0096666917169225836243 -0.010271481357152898242 -0.010271493338133520778 0.004205879536962782439 0.010111622402000601875 0.010246195100305645342 0.010110093252567025138 0.0099044931507122520309 0.0092013599396726132584 -0.0087420745165706584962 -0.0097105015593616089697 -0.010008456183356438315 -0.0095182423787744212251 -0.0078750253961876685166 -0.009548453618897143752 -0.010059583718639034111 -0.010161889851139076224 -0.0083209464947350646191 0.010271480896638034153 0.010264080693022037405 0.010137615244345973137 0.0099339485939021251321 0.010202621192737350644 0.0012406033671991309724 -0.0092761456074700650992 -0.010271484294991197264 -0.0096238669859926434524 -0.0080529959058333270422 -0.0095683781001804635302 -0.010032439942352738144 -0.010087916770173090825 -0.0094934463600957301466 0.0017777050391509555648 0.010271478292769663232 0.010109635341273650461 0.0099042653036480118867 0.010176730845720356744 0.0099619550941612323991 -0.0037048127988535631966 -0.0098036932411369581003 -0.0097726092498397216374 -0.0087475332062826368501 -0.0093766215831154065691 -0.009973674684408885549 -0.010092926991665088915 -0.010271463547245139603 -0.00015713460788259437598 0.0083500448688352529175 0.010111656953705144488 0.0099037076513036302605 0.010177106282084845065 0.0099695879915625892215 0.0066758417341460834019 -0.0088217530849002447069 -0.010009413219713715962 -0.0097426815666408900229 -0.010271488126496978316 -0.010038315310637426284 -0.010092523462496384018 -0.0085111603843665943614 -0.0021211842309179400681 -0.010247780654256339813 0.01027146235216149471 0.0099261105575120366779 0.010200281842595478043 0.0099915062227709499493 0.010244272768068817328 0.00027337308954155037583 -0.010271491133003660817 -0.0099034563621010329032 0.0010138085321895863936 -0.0092583901341880409097 -0.010003317461480549372 -0.0080707482287006322014 -0.0026072614645509038615 -0.010105977894247842805 -0.0003527048692251203918 0.0099098370288747874429 0.010174370856695012094 0.0099663489312183054653 0.010217545666735454793 0.010082538249444491368 -0.0067537037724409157077 -0.0095647416396055940507 0.0032010715047479181526 -0.005236901070727073039 -0.010092471480576145279 -0.0080092532777121701326 -0.0034777147520614671607 -0.0099814256096744467112 -0.0094804145796814221631 0.01027147412512093537 0.010173844457259315077 0.0099661114138866677137 0.010220544423139587414 0.010142133053286449262 0.0034509242171225965566 -0.009765407372652834192 0.0042164103037285035822 -0.0079328206434717465217 -0.0097762921215305293582 -0.0099035055665252658824 -0.0052216310255503491783 -0.0099507033188209175617 -0.0080423925399431585304 -0.0092363244042696218683 0.010271471782644519405 0.0099862542857904589705 0.010244351078750017423 0.010165331271403696065 0.0099469710104819648866 -0.002193303677362834405 0.0058970508395685865624 -0.0058689012289937130332 -0.0069321546953486157597 -0.008261526549467185232 -0.0072861081318480718644 -0.0098658606022176756345 -0.0075907772674065430302 -0.0097646800147769916706 0.0035322641970779145547 0.0099647750330782713934 0.010218148963060466258 0.01014004999930131698 0.0099193592723682503381 0.0093073233847518702794 0.0074309263316622367612 -0.005685077446213536792 -0.0075076707527655600974 -0.010119366253280116796 -0.0087027372668903243969 -0.0098547040727511390351 -0.0095120772789648016382 -0.0096688107646849871107 -0.0094069655627470015469 0.010271475801228162339 0.010214293005067808309 0.010142058258071569993 0.0099228630957323565864 0.010193064696203546146 0.0096266080412533497346 -0.0095240324013859470331 -0.0059560124175868454227 -0.0099397580276644886821 -0.0092697962598832315401 -0.009948336589753829437 -0.0076967456106949126704 -0.0096400549488904110212 -0.0093205554150269272207 -0.0064481596284851902881 0.010271480208528395439 0.010162187875162155895 0.0099397862852282862361 0.010220737007534657498 0.010194235011641140584 -0.0040616846811514914148 -0.0052225508130608585058 -0.0092451490206974153846 -0.0093550217934149516169 -0.0099360666003635595561 -0.0076710964599632737101 -0.0095587990564947964561 -0.0092605530392011487645 -0.0098074445929108439168 0.0084641052651052949007 0.0101378686413931135 0.0099223475500943326966 0.010197702360812067185 0.010161402229168054259 0.0060089897457670940831 0.00047525451790468933606 -0.0087752087141307871104 -0.0095596318924858966759 -0.010121295399632043374 -0.0077315661183958543645 -0.0096095108154698079261 -0.0092211962916336227131 -0.0078060460863384568617 -0.0089121637175185799973 0.010271468977025119407 0.0099161994982902776363 0.010196273901239425591 0.01016254129805270294 0.010119549183586321744 0.0074677765719606938391 -0.005521764246385422667 -0.009733448017193103291 -0.010271481283215805683 -0.0078293246286829550062 -0.0096769021506103985314 -0.0091811147058972683577 -0.0077119638398777433722 -0.009386409496531467056 -0.00062166893371286833288 0.0099546958387841145977 0.010214353416070867664 0.010185843745739098926 0.010144686053989221061 0.0079189043117285640161 0.0040664248213888752256 -0.010271484861199454627 -0.0090975201135916426015 -0.0079299690922804786514 -0.0097505409973433175563 -0.0092589197463282309902 -0.0076650728749344696974 -0.0080705751615263512933 -0.0080765431559055404775 0.010271472809956076408 0.010191439541487753995 0.010167030991394650913 0.010126931822031736558 0.010271488072279261194 0.010210998056783436236 -0.0023989602492628346597 -0.0073971556129064364171 -0.0080563377999815343616 -0.0098436808037957249096 -0.0093306205934257004792 -0.0076637221724610796875 -0.0091794646989325386077 -0.0079745826603119136788 -0.0091516118603142265764 0.010271471498461628644 0.01016316925191752471 0.010124519132523920883 0.0079647270576318224961 0.010229628311156487019 0.0092275043206329170065 -0.0048227647256896908484 -0.0081642682408693857676 -0.0099571783337062801794 -0.009396921391657719197 -0.007690503055545432412 -0.0086560921957649847314 -0.0078846772533097131408 -0.0093088768690147462304 0.0030702537571990367628 0.010181581798866287669 0.010136833688339603674 0.0079051603825770894174 0.01021742783730124858 0.010116655598527949864 0.0033017445957530095445 -0.0096138679542455141025 -0.010158846063178178856 -0.009426190937561350694 -0.008505990472826178983 -0.0095332961563824349105 -0.0078288987849009956943 -0.0076638686107293515354 -0.010271498027108154696 0.010271490138968978126 0.01012283228790016032;-0.0079874661377997355216 -0.01023520918022290116 -0.010135363184374074699 -0.0063702039971762214332 0.010274725934474291528 0.010062796972252027738 0.0094206257246225392349 0.0097540185345058628974 0.0080213655168261156769 0.009717018481557820539 0.0094972242562711382818 0.0060356068402920093688 -0.0084479225415841439212 -0.010153901784107030939 -0.0079607389186033741119 -0.01021925697499381433 -0.010111069372927401072 -0.010253174675705516161 0.00079626182055143857573 0.010274684102411292194 0.009555415579321579686 0.0098325892393141822723 0.0083618855474791586868 0.0097010384706146136208 0.0094081878986709277513 0.0073257769320850072564 0.01015394684237932825 -0.010274722247765932792 -0.0079772504069116571129 -0.010209564902967378786 -0.010112266374687347084 -0.01024650753252076725 -0.010041600129941692307 0.006596860784225867802 0.009769647943058592382 0.0099613687464628480894 0.01018651385358555761 0.0097565375533367835331 0.009403253364483497509 0.0072720960906582921002 0.0098359696773093231725 0.001676656002652465163 -0.008343905283605864906 -0.0102362700669150989 -0.010136507488414924286 -0.01027172560084005544 -0.010138025313927828339 -0.003424319341941308055 0.010274722848861540109 0.010129706924987097807 0.010274714520441874388 0.009761920460908865213 0.0094176437482583665733 0.0074034646392214433636 0.0098787642946825821033 0.010273541252609345517 0.009492960152372449667 -0.010274693870379903241 -0.010110204694458814478 -0.010249100960290151788 -0.010112540951261569239 -0.0099085729924625540188 0.0024304542497496340291 0.010274725288860683814 0.010140552509540219639 0.0098902549307772359005 0.0094552776118635058211 0.0074665037831408717986 0.0096697429367046290605 0.010274699514252244939 0.010274709871583508417 -0.0042072006483954435888 -0.010114816911597932989 -0.010249384753980345444 -0.010113269768973099857 -0.0099075960436527908681 -0.0092042448980491908817 0.0087448203115395844315 0.0097135696810242873334 0.010011586208397064632 0.0095212467309847333835 0.0078774868807989905511 0.0095514301160842200039 0.01006274640649260782 0.010165105168063732002 0.0083235773166435069598 -0.010274714387010452227 -0.01026731491882046203 -0.010140822054484979753 -0.0099370786993958227368 -0.01020580920952634911 -0.0012409832367564429829 0.009279056858918395545 0.010274711571549976358 0.0096268888193951508009 0.0080555599005565255155 0.0095713965218806092844 0.010035597677967253785 0.010091073335865874058 0.0094964398707653666781 -0.0017782514715566700211 -0.010274683767575343296 -0.010112811443612637272 -0.0099073928511697068738 -0.010179898480547851236 -0.0099650832069372256156 0.0037059819848584180275 0.0098067735747200540652 0.0097756764647581231159 0.0087502849304206160863 0.0093795409207565964144 0.0099768032016405786 0.010096108806676461211 0.0102747135122952752 0.00015719652574158220399 -0.0083526454298749695099 -0.010114815587713370248 -0.0099068503871132182481 -0.010180303400338196543 -0.0099727524939095847645 -0.006677947583140462183 0.0088245212457002692591 0.010012546605244093331 0.009745773604310448146 0.010274706448213719381 0.010041474862329535789 0.010095710724714511419 0.0085138172703388432377 0.0021218569280406075588 0.010250974099010472934 -0.010274709126635372253 -0.0099292509845471717961 -0.010203501398032005162 -0.0099946210069105125007 -0.010247463119777928953 -0.00027345996847577140653 0.010274718908369376638 0.0099065631703500571514 -0.0010141069694336820629 0.0092613021831943753703 0.010006479364809205829 0.0080732826771897549939 0.0026080753672071904994 0.010109133734151129827 0.00035281603808246414814 -0.0099129752613365332281 -0.010177551727832100104 -0.0099694937620217922991 -0.01022073197359113679 -0.010085712028576823349 0.0067558497764501840646 0.0095677386203302967893 -0.0032020575243915344425 0.0052385231009953545783 0.010095624400125581197 0.0080117810339208825332 0.0034788303746276440405 0.009984554731520111498 0.0094833876714728246315 -0.010274694874130855388 -0.010177014813798294229 -0.0099692572200850357311 -0.010223769441177357406 -0.010145329704013612837 -0.0034520393512420073298 0.0097684846728776641989 -0.0042177189662046636609 0.0079353166903454921272 0.0097793831052448432217 0.0099065991685094341446 0.0052232606747217988005 0.0099538390659726135729 0.008044906253953555339 0.0092392260256768943272 -0.010274708085373127422 -0.0099893675295637703038 -0.010247550101070541928 -0.010168517844263851718 -0.0099500970916305379876 0.0021940051141525786227 -0.0058989099516202842324 0.0058707238292150130607 0.0069343681771468794126 0.0082641240042310402936 0.0072884200226893819385 0.0098689836525390987193 0.007593167511207541201 0.00976776386411046596 -0.0035333370195978104633 -0.0099679163794329402049 -0.010221341703601241613 -0.010143213397213388799 -0.0099224903997873863115 -0.0093102742949761792268 -0.0074332736470580943952 0.0056868764678763466039 0.0075100226898658344749 0.010122527999785932082 0.0087054657178771976955 0.0098577764111243155326 0.0095150445202588068011 0.0096718674881339401772 0.0094099063354220763983 -0.010274712198971833882 -0.010217520709102546547 -0.010145239629337750656 -0.0099259651975263738649 -0.010196274240464970814 -0.0096296536574669838043 0.0095270294284848459215 0.0059578815943678370068 0.0099428739051481140887 0.0092726890309172207982 0.0099514832436606234789 0.0076991861175351406985 0.0096431140005257230674 0.0093234875930639869029 0.0064501669611572044066 -0.010274701624595886096 -0.010165373304793400705 -0.009942911392407650234 -0.010223946652437103724 -0.010197465737516753573 0.0040629582258961162433 0.0052242000152467821597 0.0092480642055910548816 0.0093579742101285532524 0.0099391891681605924053 0.0076735137726560449095 0.0095617902556740155123 0.0092634771464618105574 0.0098105253165279952821 -0.0084667529704099599858 -0.010141069551513453781 -0.0099254704014942775336 -0.010200909030610971415 -0.010164590331344756577 -0.0060109091279545679917 -0.00047540148642258447335 0.0087779677815835871479 0.0095626396205411440254 0.010124492015933775693 0.0077340005907500456589 0.0096125003208418560718 0.0092241119318107432645 0.0078084972652522604414 0.0089149760094245009134 -0.010274698327787280469 -0.0099193091953666927274 -0.010199483136575608969 -0.010165753763727641487 -0.010122738828173959147 -0.0074701528344752569921 0.0055235003569459421857 0.0097365346185754701736 0.010274690309491940274 0.0078317731947123627595 0.0096799441239212268007 0.0091840042859760960547 0.0077143889146244638139 0.0093893561425880470162 0.0006218487170012590784 -0.0099578197640356157228 -0.010217583894369554678 -0.01018903648532736711 -0.010147871666581598227 -0.0079213850940709779752 -0.0040677092301141300895 0.01027472171461815513 0.0091003831421479029068 0.0079324418547398137941 0.0097536012874159822711 0.0092618462801338438672 0.0076674755785624080368 0.0080730978663212139834 0.008079063483637108703 -0.010274716958422632634 -0.010194638327470289391 -0.010170238633137426015 -0.010130106255416137725 -0.010274693183547241315 -0.010214215690485925828 0.00239972226492416894 0.0073994516397873364225 0.0080588822070883758125 0.0098467988058061842876 0.0093335579999057095846 0.0076661614541867892023 0.0091823094044613771947 0.0079770674072945461919 0.0091544962357437819483 -0.010274720521173300036 -0.010166360153901586941 -0.010127680642402808048 -0.0079672286493483682884 -0.010232835217645203096 -0.0092304031497107350002 0.004824245724747548876 0.008166856820512864365 0.0099602841185543675162 0.0093998898344636854646 0.0076929123992465452131 0.0086588136386582803539 0.0078871390513149969986 0.0093118023039946342528 -0.0030712226678700276991 -0.010184783102899242282 -0.010140018015306371396 -0.0079076485213875630925 -0.010220637088521677266 -0.010119851209158006039 -0.0033027660759951224696 0.0096168630883624144079 0.010162067820996758746 0.0094291583751255729495 0.0085086625467160909714 0.0095363055898755391682 0.0078313819450769751179 0.0076662964175936805164 0.010274727627282003242 -0.010274718396586945968 -0.010126021375289099083];

% Layer 2
b2 = [-0.15806342025586542221;-0.20263705464362216646;-0.20065611029666038934;0.10228308343996793395;0.20356304367613056727;0.1966806756842651438;0.18587177534149140756;0.19259168455328595781;0.15811736204980481046;0.16639085520859170364;0.19160368958065679412;-0.097164452597416628432;-0.20232197528981712975;-0.20081872127931957306];
LW2_1 = [-0.15606248594110072592 -0.1561912371571611835 0.15595903650566084186 -0.15618879019786183204;-0.20007111370668342887 -0.2002381548635432662 0.19994022986163215161 -0.20023603408333676135;-0.19811487964194376965 -0.19828050592444346201 0.19798221519753911313 -0.19827801057203880974;0.10098391251197927354 0.10107418784305738368 -0.10091952330902297097 0.10107518487681889374;0.20098258034669574945 0.20115431554779519829 -0.20085064432781774002 0.20115365989960926063;0.19418390745524222174 0.1943551365409133258 -0.19405773053069694245 0.1943567470331946101;0.18351475381395265796 0.18367287824985706335 -0.18339394815166776276 0.1836725234917667704;0.19015077963186211019 0.19031196897952906699 -0.19002569067911159739 0.19031097091408882838;0.15611289318321622255 0.15624622781058755683 -0.15601183665995968508 0.15624585143581828928;0.16427664629933969032 0.16442406046967658617 -0.16417190198031536563 0.16442620179578981698;0.18917213950093750285 0.18933760946359287636 -0.18904922648904401439 0.18933808851734351686;-0.095931532669890212661 -0.096015388437497975471 0.095870397903326437516 -0.096015898775468080939;-0.19976305143048775359 -0.19992594539615185512 0.19964110756800446111 -0.19992362882671374513;-0.19827402932956270099 -0.19844184997885813693 0.19815325771653330422 -0.19844111406034417588];

% Output 1
y1_step2.ymin = -1;
y1_step2.gain = [0.0190059825244621;0.0193891389572893;0.0183627862416841;0.0193817633738518;0.0188405522355516;0.018745111532063;0.0186614404154796;0.0188884099959369;0.0195520316662885;0.0193727483430517;0.0189083145746926;0.0197256465182784;0.0225338675365694;0.0222063390888185];
y1_step2.xoffset = [-12.1212528153389;-0.601920632543932;-1.15145934905925;-0.429547048440832;-1.12478221434753;-2.20204466365142;-0.786587714053331;-1.86890135285225;-0.560322744400975;-0.948088181180535;-2.0999150194759;-0.674067786760024;-0.761973256854406;-0.951831563844283];
y1_step1.xrows = 15;
y1_step1.keep = [1 2 3 4 5 6 7 8 9 10 11 12 13 14];
y1_step1.remove = 15;
y1_step1.constants = 0;

% ===== SIMULATION ========

% Dimensions
TS = size(x1,2); % timesteps

% Input 1 Delay States
xd1 = removeconstantrows_apply(xi1,x1_step1);
xd1 = mapminmax_apply(xd1,x1_step2);
xd1 = [xd1 zeros(14,1)];

% Allocate Outputs
y1 = zeros(15,TS);

% Time loop
for ts=1:TS
    
    % Rotating delay state position
    xdts = mod(ts+22,24)+1;
    
    % Input 1
    temp = removeconstantrows_apply(x1(:,ts),x1_step1);
    xd1(:,xdts) = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    tapdelay1 = reshape(xd1(:,mod(xdts-[1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23]-1,24)+1),322,1);
    a1 = tansig_apply(b1 + IW1_1*tapdelay1);
    
    % Layer 2
    a2 = b2 + LW2_1*a1;
    
    % Output 1
    temp = mapminmax_reverse(a2,y1_step2);
    y1(:,ts) = removeconstantrows_reverse(temp,y1_step1);
end

% Final delay states
finalxts = TS+(1: 23);
xits = finalxts(finalxts<=23);
xts = finalxts(finalxts>23)-23;
xf1 = [xi1(:,xits) x1(:,xts)];
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end

% Remove Constants Output Reverse-Processing Function
function x = removeconstantrows_reverse(y,settings)
Q = size(y,2);
x = nan(settings.xrows,Q,'like',y);
x(settings.keep,:) = y;
x(settings.remove,:) = repmat(settings.constants,1,Q);
end
